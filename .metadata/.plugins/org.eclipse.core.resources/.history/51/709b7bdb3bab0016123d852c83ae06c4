package crawlData;

import java.util.ArrayList;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class CrawlNewsZing {

	/*
	 * Danh sách các link chủ đề
	 */
	public ArrayList<String> addUrl() {
		ArrayList<String> URLs = new ArrayList<String>();
		URLs.add("http://news.zing.vn/the-gioi.html");
		URLs.add("http://news.zing.vn/suc-khoe.html");
		URLs.add("http://news.zing.vn/kinh-doanh-tai-chinh.html");
		URLs.add("http://news.zing.vn/the-thao.html");
		URLs.add("http://news.zing.vn/cong-nghe.html");
		return URLs;
	}
	
	/*
	 * 
	 * Lấy tất cả các link tin tức trong link chủ đề
	 * 
	 * Output: biến trả ra danh sách các link tin tức thuộc chủ đề
	 * 
	 */
	public ArrayList<String> getLinksNewsZing(){
		ArrayList<String> URLs = addUrl();
		ArrayList<String> link = new ArrayList<String>();
		for (String url : URLs) {
			try{
				// Lay het noi dung HTML cua trang co URL = currentURL
				Document doc = Jsoup.connect(url).data("query", "Java").userAgent("Mozilla").cookie("auth", "token")
						.timeout(50000).get();

				// Lay cac element la div trong doc
				Elements elements = doc.getElementsByTag("div");
				//Duyệt qua từng element
				for(Element e : elements){
					//Kiểm tra element có attr class = "wrapper"
					if(e.hasAttr("class") && e.attr("class").trim().equals("wrapper")){
						//Lấy các elements con
						Elements wrappers = e.children();
						for(Element wrapper : wrappers){
							if(wrapper.hasAttr("id") && wrapper.attr("id").trim().equals("category")){
								Elements categories = wrapper.children();
								for(Element category : categories){
									if(category.attr("class").trim().equals("content-wrap")){
										Elements contentWraps = category.children();
										for(Element contentWrap : contentWraps){
											if(contentWrap.attr("class").trim().equals("cate_content")){
												Elements cateContents = contentWrap.children();
												for(Element cateContent : cateContents){
													//Lấy các link trong element có class featured
													if(cateContent.attr("class").trim().equals("featured")){
														Elements featureds = cateContent.children();
														for(Element featured : featureds){
															if(featured.tagName().trim().equals("article")){
																Elements articles = featured.children();
																for(Element article : articles){
																	if(article.tagName().trim().equals("header")){
																		Elements headers = article.children();
																		for(Element header : headers){
																			if(header.attr("class").trim().equals("title")){
																				Element title = header.child(0);
																				System.out.println("http://news.zing.vn" + title.attr("href"));
																			}
																		}
																	}
																}
															}
														}
													}
													//Lấy các link trong element có class cate_content
													if(cateContent.attr("class").trim().equals("cate_content")){
														
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
			catch(Exception e){
				e.printStackTrace();
			}
		}
		return link;
	}
}
